<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>13ç”Ÿå‘½é€±æœŸ-æ¥API1</title>
    <script src="https://unpkg.com/vue@next"></script>
</head>
<style>
    #view{
        background-color: #999;
    }
    .card{
        display: inline-flex;
        width: 30vw;
        margin-bottom: 1rem;
    }
    .imgBox{
        width: 10rem;
        height: 10rem;
    }
    .imgBox > div{
        height: 100%;
        background-size: contain;
        background-position: 50%;
        background-repeat: no-repeat;
    }
    img{
        height: 100%;
    }
</style>
<body>
    <div id="view">
        <!-- 1. å…ˆç¢ºèªproductListçš„è³‡æ–™ç‹€æ³ -->
        <!-- {{productList}} -->

        <!-- 2. é€év-forå°‡é™£åˆ—ä¸­çš„è³‡æ–™æ¸²æŸ“å‡ºä¾† -->
        <div 
            v-for="(item) in productList" 
            :key="item.id"
            class="card" 
        >
            <!-- 3-1. åœ–ç‰‡é¡¯ç¤ºæ–¹å¼ï¼šä½¿ç”¨img -->
            <!-- <div class="imgBox">
                <img :src="item.image" alt="">
            </div> -->

             <!-- 3-2. åœ–ç‰‡é¡¯ç¤ºæ–¹å¼ï¼šä½¿ç”¨div -->
            <div class="imgBox">
                <div
                    :style="{
                        backgroundImage: `url( ${item.image })`
                    }"
                ></div>
            </div>

            <!-- 4. è©•åƒ¹æ˜Ÿæ˜Ÿå¯ä»¥é€éä¹‹å‰ç« ç¯€çš„æ–¹å¼æ€è€ƒ -->
            <div class="star">
                <span class="rate">
                    <!-- 4-1 å…ˆç¢ºèªrateæ•¸å€¼ -->
                    <!-- {{item.rating.rate}} -->

                    <!-- 4-2 å¦‚æœè¦é¡¯ç¤ºå››é¡†æ˜Ÿ -->
                    <!-- <span>ğŸŒŸ</span>
                        <span>ğŸŒŸ</span>
                        <span>ğŸŒŸ</span>
                        <span>ğŸŒŸ</span> -->
                    
                    <!-- 4-3 ç”¨v-foræ¸²æŸ“çš„æ–¹æ³• -->
                    <!-- <span v-for="i in 4">ğŸŒŸ</span> -->

                    <!-- 4-4 ç”±æ–¼åªèƒ½è¼¸å…¥æ­£æ•´æ•¸ï¼Œéœ€è¦å°‡è³‡æ–™æ•¸å€¼ç”¨parseIntè½‰è®Šæˆæ­£æ•´æ•¸ -->
                    <!-- <span v-for="i in (parseInt(item.rating.rate))">ğŸŒŸ</span>                         -->
                        
                    <!-- 4-5 é€éåœ¨methodsä¸­å®šç¾©æ–¹æ³•ä¾†è¼¸å…¥ï¼Œå¯ä»¥åšæ¯”è¼ƒè¤‡é›œçš„é‹ç®— -->
                    <!-- <span v-text="parseStar1(item.rating.rate)"></span> -->
                    
                    <!-- 4-6 åŒä¸Šï¼Œæƒ³è¦é¡¯ç¤ºç©ºæ˜Ÿæ˜Ÿ -->
                    <span v-text="parseStar2(item.rating.rate)"></span>
                </span>
                <span class="count">
                    from {{item.rating.count}} person
                </span>
            </div>
        </div>
    </div>
</body>
<script>
    const VM = {
        data(){
            return {
                productList: [],
                sec2: 5
            }
        },
        methods: {
            mountView(){
                //é€éfetch APIä¾†å–å¾—è³‡æ–™
                fetch('https://fakestoreapi.com/products')
                .catch((error)=>{
                    //å›å‚³ç•°å¸¸ç‹€æ³
                    console.log(error)
                })
                .then((response) =>{
                    //è©³ç´°èªªæ˜ https://developer.mozilla.org/zh-CN/docs/Web/API/Response/json
                    //å›å‚³response
                    return response.json()
                })
                // .then(function(myJson){
                    // æœƒåˆ°æœ‰äº›ç¯„ä¾‹ä½¿ç”¨ä¸Šé¢ä¸€è¡Œå¯«æ³•ï¼Œä½†é€™æ¨£åœ¨é€™å€‹functionä½œç”¨åŸŸçš„thisï¼ŒæœƒæŒ‡å‘åˆ°windowè€Œä¸æ˜¯Vueå¯¦é«”
                .then((myJson) =>{
                    //é€éç®­é ­å‡½å¼ï¼Œè®“thisæŒ‡å‘åˆ°Vueå¯¦é«”
                    // console.log(this)
                    
                    //ç¢ºèªå›å‚³ç‚ºç©ºé™£åˆ—
                    // console.log(this.productList);
                    
                    //å›å‚³myJsonï¼Œä¸¦å°‡æ­¤è³‡æ–™è³¦å€¼çµ¦Vueå¯¦é«”çš„dataä¸­
                    this.productList = myJson
                })
            },
            parseStar1(rate){
                //éœ€è¦å››æ¨äº”å…¥
                const res = rate.toFixed()

                // for (è®Šæ•¸ in ç‰©ä»¶) {...}
                // ç”±æ–¼åªèƒ½è¼¸å…¥ç‰©ä»¶æ‰€ä»¥ä¸èƒ½ç”¨forin
                let star = ""
                for (let i = 0; i < res; i++) {
                    star += "ğŸŒŸ"
                }
                return star+rate
            },
            parseStar2(rate){
                //éœ€è¦æ²’æœ‰äº®çš„æ˜Ÿæ˜Ÿ
                const res = rate.toFixed()
                let star = ""
                for (let i = 0; i < 5; i++) {
                    if(i >= res){
                        star += "â˜†"
                    }else{
                        star += "â˜…"
                    }
                }
                return star+rate
            }
        },
        created() {
            //Vueé–‹å§‹è¢«å»ºç«‹
            console.log('create');
        },
        mounted() {
            //ç•«é¢è¼‰å…¥å¾Œï¼ŒDOMç‰©ä»¶(div#view)å·²è¢«å»ºç«‹
            console.log('mounted');
            this.mountView()
        }
    }
    Vue.createApp(VM).mount('#view')
</script>
</html>